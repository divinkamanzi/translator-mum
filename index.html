<!DOCTYPE html>
<html lang="rw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KinyaTrans Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --p: #2563eb; --s: #25d366; --bg: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 15px; display: flex; justify-content: center; }
        .app { width: 100%; max-width: 420px; }
        .card { background: white; border-radius: 24px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 12px; border: 1px solid #e2e8f0; }
        .label { font-size: 11px; font-weight: 700; color: var(--p); text-transform: uppercase; margin-bottom: 10px; display: block; }
        textarea { width: 100%; height: 90px; border: none; font-size: 18px; outline: none; resize: none; font-family: inherit; color: #1e293b; }
        #output { font-size: 19px; color: #1e293b; font-weight: 600; min-height: 40px; line-height: 1.5; margin: 10px 0; }
        .btn-row { display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
        .btn { background: #f8fafc; border: 1px solid #e2e8f0; padding: 10px 14px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; font-size: 13px; color: #475569; font-weight: 500; }
        .btn-speak { background: #dbeafe; color: #1e40af; border: none; }
        .btn-wa { background: #dcfce7; color: #166534; border: none; }
        .btn:active { transform: scale(0.95); }
    </style>
</head>
<body>

<div class="app">
    <div class="card">
        <span class="label">Kinyarwanda</span>
        <textarea id="in" placeholder="Andika hano..." oninput="debounceTranslate()"></textarea>
        <div class="btn-row">
            <button class="btn" onclick="pasteText()"><i data-lucide="clipboard" style="width:14px;margin-right:5px"></i> Paste</button>
            <button class="btn" onclick="clearAll()"><i data-lucide="trash-2" style="width:14px;margin-right:5px"></i> Clear</button>
        </div>
    </div>

    <div class="card" style="border-left: 6px solid var(--p);">
        <span class="label">English Result</span>
        <div id="output">Waiting for text...</div>
        <div class="btn-row">
            <button class="btn btn-speak" onclick="speak()"><i data-lucide="volume-2" style="width:16px;margin-right:5px"></i> Listen</button>
            <button class="btn" onclick="copyText()"><i data-lucide="copy" style="width:14px;margin-right:5px"></i> Copy</button>
            <button class="btn btn-wa" onclick="shareWA()"><i data-lucide="message-circle" style="width:16px;margin-right:5px"></i> Share</button>
        </div>
    </div>
</div>

<script>
    lucide.createIcons();
    let timer;

    function debounceTranslate() {
        clearTimeout(timer);
        timer = setTimeout(translate, 500);
    }

    async function translate() {
        const text = document.getElementById('in').value;
        const out = document.getElementById('output');
        if(!text.trim()) { out.innerText = "Waiting for text..."; return; }
        try {
            const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=rw&tl=en&dt=t&q=${encodeURI(text)}`);
            const data = await res.json();
            out.innerText = data[0][0][0];
        } catch (e) { out.innerText = "Error: No Internet"; }
    }

    function speak() {
        const text = document.getElementById('output').innerText;
        if (text === "Waiting for text...") return;
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'en-US';
        window.speechSynthesis.speak(msg);
    }

    async function pasteText() {
        try {
            const text = await navigator.clipboard.readText();
            document.getElementById('in').value = text;
            translate();
        } catch (err) { alert("Please type text above"); }
    }

    function copyText() {
        navigator.clipboard.writeText(document.getElementById('output').innerText);
        alert("Copied!");
    }

    function shareWA() {
        const text = document.getElementById('output').innerText;
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
    }

    function clearAll() {
        document.getElementById('in').value = "";
        document.getElementById('output').innerText = "Waiting for text...";
    }
</script>
</body>

</html>
